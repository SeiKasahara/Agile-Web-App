{% from "components/button.html" import button %}

{% macro share_modal() %}
<div id="share-modal" class="fixed inset-0 hidden bg-black bg-opacity-50 z-50 items-center justify-center">
    <div class="bg-white rounded-lg text-black p-6 w-full max-w-md mx-4">
        <!-- Step 1: Component Selection -->
        <div id="share-step-1">
            <h2 class="text-xl font-bold mb-4">Select Components to Share</h2>
            <div class="space-y-2 mb-6">
                <label class="flex items-center">
                    <input type="checkbox" name="share_components" value="metrics" checked class="mr-2">
                    Key Metrics
                </label>
                <label class="flex items-center">
                    <input type="checkbox" name="share_components" value="time_trends" checked class="mr-2">
                    Time Trends
                </label>
                <label class="flex items-center">
                    <input type="checkbox" name="share_components" value="heatmap" checked class="mr-2">
                    Location Heatmap
                </label>
                <label class="flex items-center">
                    <input type="checkbox" name="share_components" value="fuel_comparison" checked class="mr-2">
                    Fuel Comparison
                </label>
                <label class="flex items-center">
                    <input type="checkbox" name="share_components" value="forecast" checked class="mr-2">
                    Predictive Analytics
                </label>
            </div>
            <div class="flex justify-end space-x-2">
                {{ button("Generate Share Link", id="generate-share-btn", variant="black") }}
                {{ button("Close", id="close-share-btn", variant="default") }}
            </div>
        </div>

        <!-- Step 2: Sharing Options -->
        <div id="share-step-2" class="hidden">
            <h2 class="text-xl font-bold mb-4">Share Your Dashboard</h2>

            <!-- Share URL -->
            <div class="mb-4">
                <h3 class="text-lg font-semibold mb-2">Share Link</h3>
                <input id="share-url-input" type="text" readonly
                    class="w-full px-3 py-2 mb-4 border rounded text-sm font-mono" />
            </div>

            <!-- Email Sharing -->
            <div class="mb-4">
                <h3 class="text-lg font-semibold mb-2">Share via Email</h3>
                <input type="email" id="share-email" placeholder="Enter recipient's email"
                    class="w-full px-3 py-2 border rounded text-sm mb-2">
                <div class="flex justify-end">
                    {{ button("Send Email", id="send-email-btn", variant="black") }}
                </div>
            </div>

            <!-- Social Share Buttons -->
            <div class="mb-4">
                <h3 class="text-lg font-semibold mb-2">Share on Social Media</h3>
                <div class="flex justify-between space-x-2">
                    <a id="twitter-share"
                        class="flex-1 flex items-center justify-center space-x-2 bg-black hover:bg-gray-600 text-white px-3 py-2 rounded">
                        <img src="{{ url_for('static',filename='assets/x.svg') }}" class="w-5 h-5" height="1" width="1"
                            alt="">
                        <span>Twitter</span>
                    </a>
                    <a id="facebook-share"
                        class="flex-1 flex items-center justify-center space-x-2 bg-blue-500 hover:bg-blue-600 text-black px-3 py-2 rounded">
                        <img src="{{ url_for('static',filename='assets/facebook.svg') }}" class="w-5 h-5" height="1"
                            width="1" alt="">
                        <span>Facebook</span>
                    </a>
                    <a id="linkedin-share"
                        class="flex-1 flex items-center justify-center space-x-2 bg-blue-300 hover:bg-blue-400 text-black px-3 py-2 rounded">
                        <img src="{{ url_for('static',filename='assets/linkedin.svg') }}" class="w-5 h-5" height="1"
                            width="1" alt="">
                        <span>LinkedIn</span>
                    </a>
                </div>
            </div>

            <div class="flex justify-between space-x-2">
                {{ button("Back", id="back-to-selection-btn", variant="default") }}
                {{ button("Copy Link", id="copy-share-btn", variant="black") }}
            </div>
        </div>
    </div>
</div>
{% endmacro %}